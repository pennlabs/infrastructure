// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`default 1`] = `
"# Generated by cdkactions. Do not modify
# Generated as part of the 'example' stack.
name: Publish example
on:
  push:
    paths:
      - cdk/example/**
jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Cache
        uses: actions/cache@v2
        with:
          path: \\"**/node_modules\\"
          key: v0-\${{ hashFiles('cdk/example/yarn.lock') }}
      - name: Install Dependencies
        run: |-
          cd cdk/example
          yarn install --frozen-lockfile
      - name: Test
        run: |-
          cd cdk/example
          yarn test
      - name: Upload Code Coverage
        run: |-
          ROOT=$(pwd)
          cd cdk/example
          yarn run codecov -p $ROOT -F example
      - name: Install jq
        run: |-
          curl -sSLo /usr/bin/jq https://github.com/stedolan/jq/releases/download/jq-1.6/jq-linux64
          chmod +x /usr/bin/jq
      - name: Check if version is already published to npm
        run: |-
          cd cdk/example
          PACKAGE=$(node -p \\"require('./package.json').name\\")
          VERSION=$(node -p \\"require('./package.json').version\\")
          NEW_VERSION=$(yarn info $PACKAGE versions --json | jq -e \\".data | any(. == \\\\\\"$VERSION\\\\\\") | not\\")
          echo \\"::set-output NEW_VERSION=$NEW_VERSION\\"
      - name: Publish to npm
        id: version_check
        run: |-
          cd cdk/example
          yarn compile
          yarn package
          mv dist/js/*.tgz dist/js/example.tgz
          yarn publish --non-interactive --access public dist/js/example.tgz
        if: github.ref == 'refs/heads/master' && steps.version_check.outputs.NEW_VERSION
        env:
          NPM_AUTH_TOKEN: \${{ secrets.NPM_AUTH_TOKEN }}
      - name: Build docs
        run: |-
          cd cdk/example
          yarn docgen
      - name: Publish docs
        if: github.ref == 'refs/heads/master'
        uses: peaceiris/actions-gh-pages@v3
        with:
          personal_token: \${{ secrets.BOT_GITHUB_PAT }}
          external_repository: pennlabs/example-docs
          cname: example.pennlabs.org
          publish_branch: master
          publish_dir: cdk/example/docs
          user_name: github-actions
          user_email: github-actions[bot]@users.noreply.github.com
    container:
      image: node:14
"
`;
